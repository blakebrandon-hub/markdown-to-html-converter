<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Markdown to HTML Converter</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    body {
      background-color: #121212;
      color: #f1f1f1;
      font-family: sans-serif;
    }

    .highlighted, .rendered {
      height: 80vh;
      padding: 15px;
      font-size: 14px;
      font-family: monospace;
      overflow-y: auto;
      border-radius: 5px;
      border: 1px solid #333;
      background-color: #1e1e1e;
      white-space: pre-wrap;
    }

    .readonly {
      opacity: 0.4;
      pointer-events: none;
    }

    .rendered {
      font-family: sans-serif;
      color: #f8f9fa;
    }

    .rendered h1, .rendered h2, .rendered h3 {
      border-bottom: 1px solid #333;
      padding-bottom: 4px;
    }

    .rendered pre {
      background: #2a2a2a;
      padding: 10px;
      border-radius: 4px;
    }

    .rendered code {
      background: #333;
      padding: 2px 4px;
      border-radius: 4px;
    }

    .tag {
      color: #c3e88d;
    }

    .md-symbol {
      color: #ff79c6;
    }

    .md-text {
      color: #f8f8f2;
    }

    label {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container-fluid py-3">

<h3 class="text-center mb-2 fw-bold" style="font-size: 2rem; color: #f1f1f1;">
  Markdown to HTML Converter
</h3>
<p class="text-center text-light mb-4">
  Write or paste Markdown â€” it's instantly converted to HTML with a live preview.
</p>

    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label text-light">Markdown</label>
    <button class="btn btn-sm btn-outline-light" style="float: right;" onclick="pasteMarkdown()">ðŸ“¥ Paste</button>
        <div id="markdown-colored" class="highlighted" contenteditable="true"></div>

      </div>



      

      <div class="col-md-4">
        <label class="form-label text-light">HTML (Auto-generated)</label>
            <button class="btn btn-sm btn-outline-light me-2" style="float: right;" onclick="copyHTML()">ðŸ“‹ Copy</button>

        <div id="html-colored" class="highlighted" contenteditable="false"></div>
      </div>



      <div class="col-md-4">
        <label class="form-label text-light">Preview</label>
        <button id="clear-button" class="btn btn-sm btn-outline-light" style="float: right;">Clear All</button>
        <div class="rendered border-secondary" id="html-preview"></div>
      </div>
    </div>

    <div class="text-center mt-4">
      <a class="btn btn-light fw-bold px-4 py-2" href="https://www.buymeacoffee.com/blakebrandon" target="_blank">
        â˜• Buy Me a Coffee
      </a>
      <div class="mt-3">
        
      </div>
    </div>
  </div>

  <script>
    const mdColored = document.getElementById('markdown-colored');
    const htmlColored = document.getElementById('html-colored');
    const htmlPreview = document.getElementById('html-preview');

    function escapeHTML(raw) {
      return raw.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    function highlightMarkdown(md) {
      return escapeHTML(md)
        .replace(/(#{1,6})( .*)/g, (_, hash, text) => `<span class="md-symbol">${hash}</span><span class="md-text">${text}</span>`)
        .replace(/\*\*(.*?)\*\*/g, '<span class="md-symbol">**</span><span class="md-text">$1</span><span class="md-symbol">**</span>')
        .replace(/\*(.*?)\*/g, '<span class="md-symbol">*</span><span class="md-text">$1</span><span class="md-symbol">*</span>')
        .replace(/^- (.*)$/gm, '<span class="md-symbol">-</span> <span class="md-text">$1</span>');
    }

    function highlightHTML(html) {
      const escaped = escapeHTML(html);
      return escaped.replace(/(&lt;\/?.+?&gt;)/g, '<span class="tag">$1</span>');
    }

    function updateFromMarkdown() {
      const raw = mdColored.innerText;
      const html = marked.parse(raw);
      htmlPreview.innerHTML = html;
      htmlColored.innerHTML = highlightHTML(html);
    }

    function updateFromHTML() {
      const rawHTML = htmlColored.innerText;
      htmlPreview.innerHTML = rawHTML;

      const temp = document.createElement("div");
      temp.innerHTML = rawHTML;
      let markdown = "";

      temp.childNodes.forEach(node => {
        if (node.nodeName === "H1") markdown += `# ${node.textContent}\n\n`;
        else if (node.nodeName === "H2") markdown += `## ${node.textContent}\n\n`;
        else if (node.nodeName === "H3") markdown += `### ${node.textContent}\n\n`;
        else if (node.nodeName === "P") markdown += `${node.textContent}\n\n`;
        else markdown += node.textContent + "\n";
      });

      mdColored.innerText = markdown.trim();
      mdColored.innerHTML = highlightMarkdown(mdColored.innerText);
    }

    function pasteMarkdown() {
  navigator.clipboard.readText().then(text => {
    mdColored.innerText = text;
    mdColored.innerHTML = highlightMarkdown(text);
    updateFromMarkdown();
  }).catch(err => console.error('Paste failed:', err));
}




    function placeCaretAtEnd(el) {
      el.focus();
      const range = document.createRange();
      range.selectNodeContents(el);
      range.collapse(false);
      const sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(range);
    }

    document.getElementById('clear-button').addEventListener('click', () => {
      mdColored.innerText = '';
      htmlColored.innerText = '';
      htmlPreview.innerHTML = '';
    });

    mdColored.addEventListener('input', () => {
      updateFromMarkdown();
      mdColored.innerHTML = highlightMarkdown(mdColored.innerText);
      placeCaretAtEnd(mdColored);
    });

    htmlColored.addEventListener('input', () => {
      updateFromHTML();
      htmlColored.innerHTML = highlightHTML(htmlColored.innerText);
      placeCaretAtEnd(htmlColored);
    });

fetch('https://md-to-html-7cf556bc3722.herokuapp.com/static/readme_sample.md')  // OR /readme if you used the custom route
  .then(res => res.text())
  .then(data => {
    mdColored.innerText = data;
    mdColored.innerHTML = highlightMarkdown(data);
    updateFromMarkdown();
  });


  </script>
</body>
</html>

